#!/bin/bash
{{ if ne .platform "wsl" }}
exit 0
{{ end }}

XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"

# Detect Windows username
WIN_USER=$(cmd.exe /c "echo %USERNAME%" 2>/dev/null | tr -d '\r')

if [ -n "$WIN_USER" ]; then
  WIN_ALACRITTY="/mnt/c/Users/$WIN_USER/AppData/Roaming/alacritty/alacritty.toml"

  mkdir -p "$XDG_CONFIG_HOME/alacritty"

  if [ -f "$WIN_ALACRITTY" ]; then
    ln -sf "$WIN_ALACRITTY" "$XDG_CONFIG_HOME/alacritty/alacritty.toml"
    echo "Created symlink for Alacritty config from Windows"
  else
    echo "Warning: Windows Alacritty config not found at $WIN_ALACRITTY"
  fi
else
  echo "Warning: Could not detect Windows username"
fi
